(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[3],{338:function(e,t,a){e.exports={chatWrap:"Chat_chatWrap__1GcB4",messageWrap:"Chat_messageWrap__PM9sM",messageInfo:"Chat_messageInfo__1I8G5",message:"Chat_message__1Zp3J",messages:"Chat_messages__3HRKs",formGroup:"Chat_formGroup__3KlkX",textarea:"Chat_textarea__axVsH"}},342:function(e,t,a){"use strict";a.r(t);var r=a(48),n=a(37),o=a(1),c=a.n(o),s=a(338),i=a.n(s),l=a(18),u=a(3),d=a(15),m=(a(5),a(83)),f=a(84),h=a(152),p=o.forwardRef((function(e,t){var a=e.children,r=e.classes,n=e.className,c=e.color,s=void 0===c?"inherit":c,i=e.component,l=void 0===i?"svg":i,f=e.fontSize,p=void 0===f?"default":f,v=e.htmlColor,j=e.titleAccess,b=e.viewBox,g=void 0===b?"0 0 24 24":b,O=Object(d.a)(e,["children","classes","className","color","component","fontSize","htmlColor","titleAccess","viewBox"]);return o.createElement(l,Object(u.a)({className:Object(m.a)(r.root,n,"inherit"!==s&&r["color".concat(Object(h.a)(s))],"default"!==p&&r["fontSize".concat(Object(h.a)(p))]),focusable:"false",viewBox:g,color:v,"aria-hidden":!j||void 0,role:j?"img":void 0,ref:t},O),a,j?o.createElement("title",null,j):null)}));p.muiName="SvgIcon";var v=Object(f.a)((function(e){return{root:{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,fontSize:e.typography.pxToRem(24),transition:e.transitions.create("fill",{duration:e.transitions.duration.shorter})},colorPrimary:{color:e.palette.primary.main},colorSecondary:{color:e.palette.secondary.main},colorAction:{color:e.palette.action.active},colorError:{color:e.palette.error.main},colorDisabled:{color:e.palette.action.disabled},fontSizeInherit:{fontSize:"inherit"},fontSizeSmall:{fontSize:e.typography.pxToRem(20)},fontSizeLarge:{fontSize:e.typography.pxToRem(35)}}}),{name:"MuiSvgIcon"})(p);var j=function(e,t){var a=function(t,a){return c.a.createElement(v,Object(u.a)({ref:a},t),e)};return a.muiName=v.muiName,c.a.memo(c.a.forwardRef(a))}(o.createElement("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}));var b=o.forwardRef((function(e,t){var a=e.alt,r=e.children,n=e.classes,c=e.className,s=e.component,i=void 0===s?"div":s,l=e.imgProps,f=e.sizes,h=e.src,p=e.srcSet,v=e.variant,b=void 0===v?"circle":v,g=Object(d.a)(e,["alt","children","classes","className","component","imgProps","sizes","src","srcSet","variant"]),O=null,x=function(e){var t=e.src,a=e.srcSet,r=o.useState(!1),n=r[0],c=r[1];return o.useEffect((function(){if(t||a){c(!1);var e=!0,r=new Image;return r.src=t,r.srcSet=a,r.onload=function(){e&&c("loaded")},r.onerror=function(){e&&c("error")},function(){e=!1}}}),[t,a]),n}({src:h,srcSet:p}),S=h||p,y=S&&"error"!==x;return O=y?o.createElement("img",Object(u.a)({alt:a,src:h,srcSet:p,sizes:f,className:n.img},l)):null!=r?r:S&&a?a[0]:o.createElement(j,{className:n.fallback}),o.createElement(i,Object(u.a)({className:Object(m.a)(n.root,n.system,n[b],c,!y&&n.colorDefault),ref:t},g),O)})),g=Object(f.a)((function(e){return{root:{position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},colorDefault:{color:e.palette.background.default,backgroundColor:"light"===e.palette.type?e.palette.grey[400]:e.palette.grey[600]},circle:{},circular:{},rounded:{borderRadius:e.shape.borderRadius},square:{borderRadius:0},img:{width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4},fallback:{width:"75%",height:"75%"}}}),{name:"MuiAvatar"})(b),O=a(22),x=a(12),S=a(153),y=a(0);function w(e){var t=e.wsChannel,a=Object(o.useState)([]),c=Object(n.a)(a,2),s=c[0],l=c[1],u=Object(o.useRef)(null);return Object(o.useEffect)((function(){var e=function(e){var t=JSON.parse(e.data);l((function(e){return[].concat(Object(r.a)(e),Object(r.a)(t))})),u&&u.current&&(u.current.scrollTop=u.current.scrollHeight)};return null===t||void 0===t||t.addEventListener("message",e),function(){null===t||void 0===t||t.removeEventListener("message",e)}}),[t]),Object(y.jsx)("div",{ref:u,className:i.a.messages,children:s.map((function(e,t){return Object(y.jsx)(E,{message:e.message,userId:e.userId,userName:e.userName,photo:e.photo},t)}))})}function E(e){var t=e.message.charAt(0).toUpperCase()+e.message.slice(1);return Object(y.jsxs)("div",{className:i.a.messageWrap,children:[Object(y.jsxs)("div",{className:i.a.messageInfo,children:[Object(y.jsxs)("p",{style:{flex:"1"},children:[" ",e.userName]}),Object(y.jsxs)("p",{children:[" ",(new Date).toLocaleDateString()]})]}),Object(y.jsxs)("div",{className:i.a.message,children:[Object(y.jsx)(O.b,{to:"/profile/"+e.userId,children:Object(y.jsx)(g,{src:e.photo})}),Object(y.jsxs)("p",{children:[" ",t]})]})]})}function N(e){var t=e.wsChannel,a=Object(o.useState)(""),r=Object(n.a)(a,2),c=r[0],s=r[1],u=Object(o.useState)("pending"),d=Object(n.a)(u,2),m=d[0],f=d[1];Object(o.useEffect)((function(){var e=function(){f("ready")};return null===t||void 0===t||t.addEventListener("open",e),function(){null===t||void 0===t||t.removeEventListener("open",e)}}),[t]);return Object(y.jsxs)("div",{className:i.a.formGroup,children:[Object(y.jsx)("textarea",{onKeyPress:function(e){c&&"Enter"===(null===e||void 0===e?void 0:e.key)&&(null===t||void 0===t||t.send(c),s(""))},placeholder:"Enter your message",className:i.a.textarea,value:c,onChange:function(e){s(e.currentTarget.value)}}),Object(y.jsx)(l.a,{style:{marginRight:"40px"},disabled:"ready"!==m,onClick:function(){c&&(null===t||void 0===t||t.send(c),s(""))},children:"Send "})]})}t.default=Object(x.d)(S.a)((function(){var e=Object(o.useState)(null),t=Object(n.a)(e,2),a=t[0],r=t[1];return Object(o.useEffect)((function(){var e,t=function(){setTimeout(a,3e3)};function a(){var a,n;null===(a=e)||void 0===a||a.removeEventListener("close",t),null===(n=e)||void 0===n||n.close(),(e=new WebSocket("wss://social-network.samuraijs.com/handlers/ChatHandler.ashx")).addEventListener("close",t),r(e)}return a(),function(){var a,r;null===(a=e)||void 0===a||a.removeEventListener("close",t),null===(r=e)||void 0===r||r.close()}}),[]),Object(o.useEffect)((function(){document.title="Chat"}),[]),Object(y.jsxs)("div",{className:i.a.chatWrap,children:[Object(y.jsx)(w,{wsChannel:a}),Object(y.jsx)(N,{wsChannel:a})]})}))}}]);
//# sourceMappingURL=3.d90319b8.chunk.js.map